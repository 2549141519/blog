<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Nameless Monster</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="ç‚¹å‡»è¿”å›ğŸ”—æˆ‘çš„åšå®¢æ–‡ç« ç›®å½•

ç›®å½•
{:toc}


1. GitHub Actionsçš„å·¥ä½œæµæ–‡ä»¶
.github/workflows æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå·¥ä½œæµï¼ˆworkflowï¼‰ï¼Œé€šå¸¸ä»¥.ymlæˆ–.yamlç»“å°¾ã€‚
æ¯ä¸ªå·¥ä½œæµæ–‡ä»¶å®šä¹‰äº†ä¸€ç»„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä¼šåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå¦‚ä»£ç æ¨é€ã€PRåˆ›å»ºã€è®¡åˆ’ä»»åŠ¡ç­‰ï¼‰è§¦å‘æ‰§è¡Œã€‚
å·¥ä½œæµçš„ç»„æˆï¼š


name: å·¥ä½œæµçš„åç§°ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªå·¥ä½œæµã€‚
on: è§¦å‘å·¥ä½œæµçš„äº‹ä»¶ï¼ˆå¦‚pushã€pull_requestã€scheduleç­‰ï¼‰ã€‚
jobs: ä¸€ç»„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥åœ¨ä¸åŒçš„è™šæ‹Ÿæœºç¯å¢ƒä¸­è¿è¡Œã€‚ä»»åŠ¡å¯ä»¥åŒ…å«å¤šä¸ªæ­¥éª¤ï¼ˆstepsï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªå…·ä½“çš„Shellå‘½ä»¤æˆ–GitHub Actionã€‚
steps: æ¯ä¸ªjobä¸‹çš„å…·ä½“æ­¥éª¤ï¼Œç”¨äºæ‰§è¡Œè„šæœ¬ã€è¿è¡Œå‘½ä»¤ã€è°ƒç”¨å¤–éƒ¨çš„GitHub Actionç­‰ã€‚
2. workflowsé›†æˆæµ‹è¯•å®ç°
è¦æ±‚é›†æˆæµ‹è¯•èƒ½æµ‹è¯•é¡¹ç›®æ˜¯å¦æˆåŠŸç¼–è¯‘ã€‚
åœ¨3TSä¸­ï¼Œæœ‰ä¸¤ç§ç¼–è¯‘æ–¹å¼ï¼š



ç›´æ¥ç¼–è¯‘å®‰è£…ï¼Œåœ¨3TS/src/dbtestç›®å½•ä¸‹æ‰§è¡Œ
cmake -S ./
make
ä½¿ç”¨dockerç¼–è¯‘ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…dockerï¼ˆå¦‚æœè¿˜æœªå®‰è£…dockerï¼‰
curl -s https://get.docker.com/ | sh
è·å–é•œåƒ
docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0
æŸ¥çœ‹é•œåƒIDï¼Œå¹¶æ ¹æ®é•œåƒIDç”Ÿæˆå®¹å™¨
docker images
docker run -it [image_id] /bin/bash
æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨
docker ps -a
docker exec -it [container_id] /bin/bash

2.1 é›†æˆæµ‹è¯•å®ç°
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿›å…¥.github/workflowsæ–‡ä»¶å¤¹ï¼Œæ–°å»ºci.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
name: 3TS CI

on:
  push:
    branches:
      - coo-consistency-check
  pull_request:
    branches:
      - coo-consistency-check

jobs:
  build_and_test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    # è®¾ç½®æ„å»ºç¯å¢ƒå’Œå®‰è£…ä¾èµ–é¡¹
    - name: Set up build environment
      run: |
        echo &#34;Setting up build environment...&#34;
        sudo apt-get update &amp;&amp; sudo apt-get install -y cmake make g&#43;&#43; libgflags-dev unixodbc unixodbc-dev odbcinst odbcinst1debian2
        echo &#34;Build environment setup complete.&#34;

    # å®‰è£… Dockerï¼Œå¦‚æœå°šæœªå®‰è£…
    - name: Install Docker
      run: |
        echo &#34;Installing Docker...&#34;
        curl -s https://get.docker.com/ | sh
        echo &#34;Docker installed successfully.&#34;

    # æ‹‰å– Docker é•œåƒ
    - name: Pull Docker image
      run: docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0

    # åˆ—å‡º Docker é•œåƒ
    - name: List Docker images
      run: docker images

    # è¿è¡Œ Docker å®¹å™¨ï¼Œå¹¶æŒ‚è½½é¡¹ç›®ç›®å½•
    - name: Run Docker container with volume
      run: |
        IMAGE_ID=$(docker images -q registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0)
        docker run -d --name 3ts_container -v ${{ github.workspace }}:/src $IMAGE_ID tail -f /dev/null

    # åœ¨ Docker å®¹å™¨ä¸­ç¼–è¯‘
    - name: Compile inside Docker
      run: |
        echo &#34;Compiling in Docker container...&#34;
        docker exec -i 3ts_container bash -c &#34;cd /src/src/dbtest &amp;&amp; cmake -S ./ &amp;&amp; make&#34;

    # æ¸…ç† Docker å®¹å™¨
    - name: Clean up Docker container
      if: always()
      run: docker rm -f 3ts_container

    # åœ¨é Docker ç¯å¢ƒç¼–è¯‘
    - name: Compile without Docker
      run: |
        echo &#34;Compiling using CMake...&#34;
        cd src/dbtest
        sudo rm -rf CMakeCache.txt CMakeFiles  # æ¸…é™¤ç¼“å­˜æ–‡ä»¶
        cmake -S ./ || cmake -DCMAKE_PREFIX_PATH=/usr/ -S ./
        make
        echo &#34;Compilation finished.&#34;
æäº¤ä»£ç åˆ°coo-consistency-checkåˆ†æ”¯ï¼ŒGitHub Actionså°±ä¼šè‡ªåŠ¨è§¦å‘å·¥ä½œæµï¼Œå¹¶æ‰§è¡Œæµ‹è¯•ã€‚ç”³è¯·pull requestï¼Œå®¡æ ¸é€šè¿‡ä¹Ÿå¯ä»¥è§¦å‘å·¥ä½œæµã€‚
æµ‹è¯•é€šè¿‡ï¼Œè¯´æ˜é¡¹ç›®å¯ä»¥æˆåŠŸç¼–è¯‘ã€‚">
    <meta name="generator" content="Hugo 0.145.0">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    


    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/%E7%BA%BF%E4%B8%8A%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95/">
    

    <meta property="og:url" content="http://localhost:1313/posts/%E7%BA%BF%E4%B8%8A%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%95/">
  <meta property="og:site_name" content="Nameless Monster">
  <meta property="og:title" content="Nameless Monster">
  <meta property="og:description" content="ç‚¹å‡»è¿”å›ğŸ”—æˆ‘çš„åšå®¢æ–‡ç« ç›®å½•
ç›®å½• {:toc} 1. GitHub Actionsçš„å·¥ä½œæµæ–‡ä»¶ .github/workflows æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå·¥ä½œæµï¼ˆworkflowï¼‰ï¼Œé€šå¸¸ä»¥.ymlæˆ–.yamlç»“å°¾ã€‚
æ¯ä¸ªå·¥ä½œæµæ–‡ä»¶å®šä¹‰äº†ä¸€ç»„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä¼šåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå¦‚ä»£ç æ¨é€ã€PRåˆ›å»ºã€è®¡åˆ’ä»»åŠ¡ç­‰ï¼‰è§¦å‘æ‰§è¡Œã€‚
å·¥ä½œæµçš„ç»„æˆï¼š
name: å·¥ä½œæµçš„åç§°ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªå·¥ä½œæµã€‚
on: è§¦å‘å·¥ä½œæµçš„äº‹ä»¶ï¼ˆå¦‚pushã€pull_requestã€scheduleç­‰ï¼‰ã€‚
jobs: ä¸€ç»„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥åœ¨ä¸åŒçš„è™šæ‹Ÿæœºç¯å¢ƒä¸­è¿è¡Œã€‚ä»»åŠ¡å¯ä»¥åŒ…å«å¤šä¸ªæ­¥éª¤ï¼ˆstepsï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªå…·ä½“çš„Shellå‘½ä»¤æˆ–GitHub Actionã€‚
steps: æ¯ä¸ªjobä¸‹çš„å…·ä½“æ­¥éª¤ï¼Œç”¨äºæ‰§è¡Œè„šæœ¬ã€è¿è¡Œå‘½ä»¤ã€è°ƒç”¨å¤–éƒ¨çš„GitHub Actionç­‰ã€‚
2. workflowsé›†æˆæµ‹è¯•å®ç° è¦æ±‚é›†æˆæµ‹è¯•èƒ½æµ‹è¯•é¡¹ç›®æ˜¯å¦æˆåŠŸç¼–è¯‘ã€‚
åœ¨3TSä¸­ï¼Œæœ‰ä¸¤ç§ç¼–è¯‘æ–¹å¼ï¼š
ç›´æ¥ç¼–è¯‘å®‰è£…ï¼Œåœ¨3TS/src/dbtestç›®å½•ä¸‹æ‰§è¡Œ
cmake -S ./
make ä½¿ç”¨dockerç¼–è¯‘ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…dockerï¼ˆå¦‚æœè¿˜æœªå®‰è£…dockerï¼‰
curl -s https://get.docker.com/ | sh
è·å–é•œåƒ
docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0
æŸ¥çœ‹é•œåƒIDï¼Œå¹¶æ ¹æ®é•œåƒIDç”Ÿæˆå®¹å™¨
docker images
docker run -it [image_id] /bin/bash
æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨
docker ps -a
docker exec -it [container_id] /bin/bash 2.1 é›†æˆæµ‹è¯•å®ç° åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿›å…¥.github/workflowsæ–‡ä»¶å¤¹ï¼Œæ–°å»ºci.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
name: 3TS CI on: push: branches: - coo-consistency-check pull_request: branches: - coo-consistency-check jobs: build_and_test: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 # è®¾ç½®æ„å»ºç¯å¢ƒå’Œå®‰è£…ä¾èµ–é¡¹ - name: Set up build environment run: | echo &#34;Setting up build environment...&#34; sudo apt-get update &amp;&amp; sudo apt-get install -y cmake make g&#43;&#43; libgflags-dev unixodbc unixodbc-dev odbcinst odbcinst1debian2 echo &#34;Build environment setup complete.&#34; # å®‰è£… Dockerï¼Œå¦‚æœå°šæœªå®‰è£… - name: Install Docker run: | echo &#34;Installing Docker...&#34; curl -s https://get.docker.com/ | sh echo &#34;Docker installed successfully.&#34; # æ‹‰å– Docker é•œåƒ - name: Pull Docker image run: docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0 # åˆ—å‡º Docker é•œåƒ - name: List Docker images run: docker images # è¿è¡Œ Docker å®¹å™¨ï¼Œå¹¶æŒ‚è½½é¡¹ç›®ç›®å½• - name: Run Docker container with volume run: | IMAGE_ID=$(docker images -q registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0) docker run -d --name 3ts_container -v ${{ github.workspace }}:/src $IMAGE_ID tail -f /dev/null # åœ¨ Docker å®¹å™¨ä¸­ç¼–è¯‘ - name: Compile inside Docker run: | echo &#34;Compiling in Docker container...&#34; docker exec -i 3ts_container bash -c &#34;cd /src/src/dbtest &amp;&amp; cmake -S ./ &amp;&amp; make&#34; # æ¸…ç† Docker å®¹å™¨ - name: Clean up Docker container if: always() run: docker rm -f 3ts_container # åœ¨é Docker ç¯å¢ƒç¼–è¯‘ - name: Compile without Docker run: | echo &#34;Compiling using CMake...&#34; cd src/dbtest sudo rm -rf CMakeCache.txt CMakeFiles # æ¸…é™¤ç¼“å­˜æ–‡ä»¶ cmake -S ./ || cmake -DCMAKE_PREFIX_PATH=/usr/ -S ./ make echo &#34;Compilation finished.&#34; æäº¤ä»£ç åˆ°coo-consistency-checkåˆ†æ”¯ï¼ŒGitHub Actionså°±ä¼šè‡ªåŠ¨è§¦å‘å·¥ä½œæµï¼Œå¹¶æ‰§è¡Œæµ‹è¯•ã€‚ç”³è¯·pull requestï¼Œå®¡æ ¸é€šè¿‡ä¹Ÿå¯ä»¥è§¦å‘å·¥ä½œæµã€‚
æµ‹è¯•é€šè¿‡ï¼Œè¯´æ˜é¡¹ç›®å¯ä»¥æˆåŠŸç¼–è¯‘ã€‚">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">

  <meta itemprop="name" content="Nameless Monster">
  <meta itemprop="description" content="ç‚¹å‡»è¿”å›ğŸ”—æˆ‘çš„åšå®¢æ–‡ç« ç›®å½•
ç›®å½• {:toc} 1. GitHub Actionsçš„å·¥ä½œæµæ–‡ä»¶ .github/workflows æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå·¥ä½œæµï¼ˆworkflowï¼‰ï¼Œé€šå¸¸ä»¥.ymlæˆ–.yamlç»“å°¾ã€‚
æ¯ä¸ªå·¥ä½œæµæ–‡ä»¶å®šä¹‰äº†ä¸€ç»„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä¼šåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå¦‚ä»£ç æ¨é€ã€PRåˆ›å»ºã€è®¡åˆ’ä»»åŠ¡ç­‰ï¼‰è§¦å‘æ‰§è¡Œã€‚
å·¥ä½œæµçš„ç»„æˆï¼š
name: å·¥ä½œæµçš„åç§°ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªå·¥ä½œæµã€‚
on: è§¦å‘å·¥ä½œæµçš„äº‹ä»¶ï¼ˆå¦‚pushã€pull_requestã€scheduleç­‰ï¼‰ã€‚
jobs: ä¸€ç»„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥åœ¨ä¸åŒçš„è™šæ‹Ÿæœºç¯å¢ƒä¸­è¿è¡Œã€‚ä»»åŠ¡å¯ä»¥åŒ…å«å¤šä¸ªæ­¥éª¤ï¼ˆstepsï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªå…·ä½“çš„Shellå‘½ä»¤æˆ–GitHub Actionã€‚
steps: æ¯ä¸ªjobä¸‹çš„å…·ä½“æ­¥éª¤ï¼Œç”¨äºæ‰§è¡Œè„šæœ¬ã€è¿è¡Œå‘½ä»¤ã€è°ƒç”¨å¤–éƒ¨çš„GitHub Actionç­‰ã€‚
2. workflowsé›†æˆæµ‹è¯•å®ç° è¦æ±‚é›†æˆæµ‹è¯•èƒ½æµ‹è¯•é¡¹ç›®æ˜¯å¦æˆåŠŸç¼–è¯‘ã€‚
åœ¨3TSä¸­ï¼Œæœ‰ä¸¤ç§ç¼–è¯‘æ–¹å¼ï¼š
ç›´æ¥ç¼–è¯‘å®‰è£…ï¼Œåœ¨3TS/src/dbtestç›®å½•ä¸‹æ‰§è¡Œ
cmake -S ./
make ä½¿ç”¨dockerç¼–è¯‘ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…dockerï¼ˆå¦‚æœè¿˜æœªå®‰è£…dockerï¼‰
curl -s https://get.docker.com/ | sh
è·å–é•œåƒ
docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0
æŸ¥çœ‹é•œåƒIDï¼Œå¹¶æ ¹æ®é•œåƒIDç”Ÿæˆå®¹å™¨
docker images
docker run -it [image_id] /bin/bash
æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨
docker ps -a
docker exec -it [container_id] /bin/bash 2.1 é›†æˆæµ‹è¯•å®ç° åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿›å…¥.github/workflowsæ–‡ä»¶å¤¹ï¼Œæ–°å»ºci.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
name: 3TS CI on: push: branches: - coo-consistency-check pull_request: branches: - coo-consistency-check jobs: build_and_test: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 # è®¾ç½®æ„å»ºç¯å¢ƒå’Œå®‰è£…ä¾èµ–é¡¹ - name: Set up build environment run: | echo &#34;Setting up build environment...&#34; sudo apt-get update &amp;&amp; sudo apt-get install -y cmake make g&#43;&#43; libgflags-dev unixodbc unixodbc-dev odbcinst odbcinst1debian2 echo &#34;Build environment setup complete.&#34; # å®‰è£… Dockerï¼Œå¦‚æœå°šæœªå®‰è£… - name: Install Docker run: | echo &#34;Installing Docker...&#34; curl -s https://get.docker.com/ | sh echo &#34;Docker installed successfully.&#34; # æ‹‰å– Docker é•œåƒ - name: Pull Docker image run: docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0 # åˆ—å‡º Docker é•œåƒ - name: List Docker images run: docker images # è¿è¡Œ Docker å®¹å™¨ï¼Œå¹¶æŒ‚è½½é¡¹ç›®ç›®å½• - name: Run Docker container with volume run: | IMAGE_ID=$(docker images -q registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0) docker run -d --name 3ts_container -v ${{ github.workspace }}:/src $IMAGE_ID tail -f /dev/null # åœ¨ Docker å®¹å™¨ä¸­ç¼–è¯‘ - name: Compile inside Docker run: | echo &#34;Compiling in Docker container...&#34; docker exec -i 3ts_container bash -c &#34;cd /src/src/dbtest &amp;&amp; cmake -S ./ &amp;&amp; make&#34; # æ¸…ç† Docker å®¹å™¨ - name: Clean up Docker container if: always() run: docker rm -f 3ts_container # åœ¨é Docker ç¯å¢ƒç¼–è¯‘ - name: Compile without Docker run: | echo &#34;Compiling using CMake...&#34; cd src/dbtest sudo rm -rf CMakeCache.txt CMakeFiles # æ¸…é™¤ç¼“å­˜æ–‡ä»¶ cmake -S ./ || cmake -DCMAKE_PREFIX_PATH=/usr/ -S ./ make echo &#34;Compilation finished.&#34; æäº¤ä»£ç åˆ°coo-consistency-checkåˆ†æ”¯ï¼ŒGitHub Actionså°±ä¼šè‡ªåŠ¨è§¦å‘å·¥ä½œæµï¼Œå¹¶æ‰§è¡Œæµ‹è¯•ã€‚ç”³è¯·pull requestï¼Œå®¡æ ¸é€šè¿‡ä¹Ÿå¯ä»¥è§¦å‘å·¥ä½œæµã€‚
æµ‹è¯•é€šè¿‡ï¼Œè¯´æ˜é¡¹ç›®å¯ä»¥æˆåŠŸç¼–è¯‘ã€‚">
  <meta itemprop="wordCount" content="282">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Nameless Monster">
  <meta name="twitter:description" content="ç‚¹å‡»è¿”å›ğŸ”—æˆ‘çš„åšå®¢æ–‡ç« ç›®å½•
ç›®å½• {:toc} 1. GitHub Actionsçš„å·¥ä½œæµæ–‡ä»¶ .github/workflows æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå·¥ä½œæµï¼ˆworkflowï¼‰ï¼Œé€šå¸¸ä»¥.ymlæˆ–.yamlç»“å°¾ã€‚
æ¯ä¸ªå·¥ä½œæµæ–‡ä»¶å®šä¹‰äº†ä¸€ç»„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä¼šåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå¦‚ä»£ç æ¨é€ã€PRåˆ›å»ºã€è®¡åˆ’ä»»åŠ¡ç­‰ï¼‰è§¦å‘æ‰§è¡Œã€‚
å·¥ä½œæµçš„ç»„æˆï¼š
name: å·¥ä½œæµçš„åç§°ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªå·¥ä½œæµã€‚
on: è§¦å‘å·¥ä½œæµçš„äº‹ä»¶ï¼ˆå¦‚pushã€pull_requestã€scheduleç­‰ï¼‰ã€‚
jobs: ä¸€ç»„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥åœ¨ä¸åŒçš„è™šæ‹Ÿæœºç¯å¢ƒä¸­è¿è¡Œã€‚ä»»åŠ¡å¯ä»¥åŒ…å«å¤šä¸ªæ­¥éª¤ï¼ˆstepsï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªå…·ä½“çš„Shellå‘½ä»¤æˆ–GitHub Actionã€‚
steps: æ¯ä¸ªjobä¸‹çš„å…·ä½“æ­¥éª¤ï¼Œç”¨äºæ‰§è¡Œè„šæœ¬ã€è¿è¡Œå‘½ä»¤ã€è°ƒç”¨å¤–éƒ¨çš„GitHub Actionç­‰ã€‚
2. workflowsé›†æˆæµ‹è¯•å®ç° è¦æ±‚é›†æˆæµ‹è¯•èƒ½æµ‹è¯•é¡¹ç›®æ˜¯å¦æˆåŠŸç¼–è¯‘ã€‚
åœ¨3TSä¸­ï¼Œæœ‰ä¸¤ç§ç¼–è¯‘æ–¹å¼ï¼š
ç›´æ¥ç¼–è¯‘å®‰è£…ï¼Œåœ¨3TS/src/dbtestç›®å½•ä¸‹æ‰§è¡Œ
cmake -S ./
make ä½¿ç”¨dockerç¼–è¯‘ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…dockerï¼ˆå¦‚æœè¿˜æœªå®‰è£…dockerï¼‰
curl -s https://get.docker.com/ | sh
è·å–é•œåƒ
docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0
æŸ¥çœ‹é•œåƒIDï¼Œå¹¶æ ¹æ®é•œåƒIDç”Ÿæˆå®¹å™¨
docker images
docker run -it [image_id] /bin/bash
æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨
docker ps -a
docker exec -it [container_id] /bin/bash 2.1 é›†æˆæµ‹è¯•å®ç° åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿›å…¥.github/workflowsæ–‡ä»¶å¤¹ï¼Œæ–°å»ºci.ymlæ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š
name: 3TS CI on: push: branches: - coo-consistency-check pull_request: branches: - coo-consistency-check jobs: build_and_test: runs-on: ubuntu-latest steps: - uses: actions/checkout@v2 # è®¾ç½®æ„å»ºç¯å¢ƒå’Œå®‰è£…ä¾èµ–é¡¹ - name: Set up build environment run: | echo &#34;Setting up build environment...&#34; sudo apt-get update &amp;&amp; sudo apt-get install -y cmake make g&#43;&#43; libgflags-dev unixodbc unixodbc-dev odbcinst odbcinst1debian2 echo &#34;Build environment setup complete.&#34; # å®‰è£… Dockerï¼Œå¦‚æœå°šæœªå®‰è£… - name: Install Docker run: | echo &#34;Installing Docker...&#34; curl -s https://get.docker.com/ | sh echo &#34;Docker installed successfully.&#34; # æ‹‰å– Docker é•œåƒ - name: Pull Docker image run: docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0 # åˆ—å‡º Docker é•œåƒ - name: List Docker images run: docker images # è¿è¡Œ Docker å®¹å™¨ï¼Œå¹¶æŒ‚è½½é¡¹ç›®ç›®å½• - name: Run Docker container with volume run: | IMAGE_ID=$(docker images -q registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0) docker run -d --name 3ts_container -v ${{ github.workspace }}:/src $IMAGE_ID tail -f /dev/null # åœ¨ Docker å®¹å™¨ä¸­ç¼–è¯‘ - name: Compile inside Docker run: | echo &#34;Compiling in Docker container...&#34; docker exec -i 3ts_container bash -c &#34;cd /src/src/dbtest &amp;&amp; cmake -S ./ &amp;&amp; make&#34; # æ¸…ç† Docker å®¹å™¨ - name: Clean up Docker container if: always() run: docker rm -f 3ts_container # åœ¨é Docker ç¯å¢ƒç¼–è¯‘ - name: Compile without Docker run: | echo &#34;Compiling using CMake...&#34; cd src/dbtest sudo rm -rf CMakeCache.txt CMakeFiles # æ¸…é™¤ç¼“å­˜æ–‡ä»¶ cmake -S ./ || cmake -DCMAKE_PREFIX_PATH=/usr/ -S ./ make echo &#34;Compilation finished.&#34; æäº¤ä»£ç åˆ°coo-consistency-checkåˆ†æ”¯ï¼ŒGitHub Actionså°±ä¼šè‡ªåŠ¨è§¦å‘å·¥ä½œæµï¼Œå¹¶æ‰§è¡Œæµ‹è¯•ã€‚ç”³è¯·pull requestï¼Œå®¡æ ¸é€šè¿‡ä¹Ÿå¯ä»¥è§¦å‘å·¥ä½œæµã€‚
æµ‹è¯•é€šè¿‡ï¼Œè¯´æ˜é¡¹ç›®å¯ä»¥æˆåŠŸç¼–è¯‘ã€‚">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Nameless Monster
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  
  <article class="flex-l mw8 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1"></h1>
      
      
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>ç‚¹å‡»è¿”å›<a href="https://2549141519.github.io/#/toc">ğŸ”—æˆ‘çš„åšå®¢æ–‡ç« ç›®å½•</a></p>
<ul>
<li>ç›®å½•
{:toc}</li>
</ul>
<!-- raw HTML omitted -->
<h1 id="1-github-actionsçš„å·¥ä½œæµæ–‡ä»¶">1. GitHub Actionsçš„å·¥ä½œæµæ–‡ä»¶</h1>
<p>.github/workflows æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªæ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªå·¥ä½œæµï¼ˆworkflowï¼‰ï¼Œé€šå¸¸ä»¥.ymlæˆ–.yamlç»“å°¾ã€‚<br>
æ¯ä¸ªå·¥ä½œæµæ–‡ä»¶å®šä¹‰äº†ä¸€ç»„è‡ªåŠ¨åŒ–ä»»åŠ¡ï¼Œè¿™äº›ä»»åŠ¡ä¼šåœ¨ç‰¹å®šäº‹ä»¶å‘ç”Ÿæ—¶ï¼ˆå¦‚ä»£ç æ¨é€ã€PRåˆ›å»ºã€è®¡åˆ’ä»»åŠ¡ç­‰ï¼‰è§¦å‘æ‰§è¡Œã€‚<br>
å·¥ä½œæµçš„ç»„æˆï¼š</p>
<blockquote>
</blockquote>
<p>name: å·¥ä½œæµçš„åç§°ï¼Œç”¨äºæ ‡è¯†è¿™ä¸ªå·¥ä½œæµã€‚<br>
on: è§¦å‘å·¥ä½œæµçš„äº‹ä»¶ï¼ˆå¦‚pushã€pull_requestã€scheduleç­‰ï¼‰ã€‚<br>
jobs: ä¸€ç»„ä»»åŠ¡ï¼Œæ¯ä¸ªä»»åŠ¡å¯ä»¥åœ¨ä¸åŒçš„è™šæ‹Ÿæœºç¯å¢ƒä¸­è¿è¡Œã€‚ä»»åŠ¡å¯ä»¥åŒ…å«å¤šä¸ªæ­¥éª¤ï¼ˆstepsï¼‰ï¼Œæ¯ä¸ªæ­¥éª¤æ˜¯ä¸€ä¸ªå…·ä½“çš„Shellå‘½ä»¤æˆ–GitHub Actionã€‚<br>
steps: æ¯ä¸ªjobä¸‹çš„å…·ä½“æ­¥éª¤ï¼Œç”¨äºæ‰§è¡Œè„šæœ¬ã€è¿è¡Œå‘½ä»¤ã€è°ƒç”¨å¤–éƒ¨çš„GitHub Actionç­‰ã€‚</p>
<h1 id="2-workflowsé›†æˆæµ‹è¯•å®ç°">2. workflowsé›†æˆæµ‹è¯•å®ç°</h1>
<p>è¦æ±‚é›†æˆæµ‹è¯•èƒ½æµ‹è¯•é¡¹ç›®æ˜¯å¦æˆåŠŸç¼–è¯‘ã€‚<br>
åœ¨3TSä¸­ï¼Œæœ‰ä¸¤ç§ç¼–è¯‘æ–¹å¼ï¼š</p>
<blockquote>
</blockquote>
<ol>
<li>ç›´æ¥ç¼–è¯‘å®‰è£…ï¼Œåœ¨<code>3TS/src/dbtest</code>ç›®å½•ä¸‹æ‰§è¡Œ<br>
<code>cmake -S ./</code><br>
<code>make</code></li>
<li>ä½¿ç”¨dockerç¼–è¯‘ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤å®‰è£…dockerï¼ˆå¦‚æœè¿˜æœªå®‰è£…dockerï¼‰<br>
<code>curl -s https://get.docker.com/ | sh</code><br>
è·å–é•œåƒ<br>
<code>docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0</code><br>
æŸ¥çœ‹é•œåƒIDï¼Œå¹¶æ ¹æ®é•œåƒIDç”Ÿæˆå®¹å™¨<br>
<code>docker images</code><br>
<code>docker run -it [image_id] /bin/bash</code><br>
æŸ¥çœ‹æ‰€æœ‰å®¹å™¨ï¼Œè¿›å…¥å®¹å™¨<br>
<code>docker ps -a</code><br>
<code>docker exec -it [container_id] /bin/bash</code></li>
</ol>
<h2 id="21-é›†æˆæµ‹è¯•å®ç°">2.1 é›†æˆæµ‹è¯•å®ç°</h2>
<p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè¿›å…¥<code>.github/workflows</code>æ–‡ä»¶å¤¹ï¼Œæ–°å»º<code>ci.yml</code>æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š</p>
<pre tabindex="0"><code>name: 3TS CI

on:
  push:
    branches:
      - coo-consistency-check
  pull_request:
    branches:
      - coo-consistency-check

jobs:
  build_and_test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2

    # è®¾ç½®æ„å»ºç¯å¢ƒå’Œå®‰è£…ä¾èµ–é¡¹
    - name: Set up build environment
      run: |
        echo &#34;Setting up build environment...&#34;
        sudo apt-get update &amp;&amp; sudo apt-get install -y cmake make g++ libgflags-dev unixodbc unixodbc-dev odbcinst odbcinst1debian2
        echo &#34;Build environment setup complete.&#34;

    # å®‰è£… Dockerï¼Œå¦‚æœå°šæœªå®‰è£…
    - name: Install Docker
      run: |
        echo &#34;Installing Docker...&#34;
        curl -s https://get.docker.com/ | sh
        echo &#34;Docker installed successfully.&#34;

    # æ‹‰å– Docker é•œåƒ
    - name: Pull Docker image
      run: docker pull registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0

    # åˆ—å‡º Docker é•œåƒ
    - name: List Docker images
      run: docker images

    # è¿è¡Œ Docker å®¹å™¨ï¼Œå¹¶æŒ‚è½½é¡¹ç›®ç›®å½•
    - name: Run Docker container with volume
      run: |
        IMAGE_ID=$(docker images -q registry.cn-hangzhou.aliyuncs.com/open_projects/3ts_coo:1.0)
        docker run -d --name 3ts_container -v ${{ github.workspace }}:/src $IMAGE_ID tail -f /dev/null

    # åœ¨ Docker å®¹å™¨ä¸­ç¼–è¯‘
    - name: Compile inside Docker
      run: |
        echo &#34;Compiling in Docker container...&#34;
        docker exec -i 3ts_container bash -c &#34;cd /src/src/dbtest &amp;&amp; cmake -S ./ &amp;&amp; make&#34;

    # æ¸…ç† Docker å®¹å™¨
    - name: Clean up Docker container
      if: always()
      run: docker rm -f 3ts_container

    # åœ¨é Docker ç¯å¢ƒç¼–è¯‘
    - name: Compile without Docker
      run: |
        echo &#34;Compiling using CMake...&#34;
        cd src/dbtest
        sudo rm -rf CMakeCache.txt CMakeFiles  # æ¸…é™¤ç¼“å­˜æ–‡ä»¶
        cmake -S ./ || cmake -DCMAKE_PREFIX_PATH=/usr/ -S ./
        make
        echo &#34;Compilation finished.&#34;
</code></pre><p>æäº¤ä»£ç åˆ°<code>coo-consistency-check</code>åˆ†æ”¯ï¼ŒGitHub Actionså°±ä¼šè‡ªåŠ¨è§¦å‘å·¥ä½œæµï¼Œå¹¶æ‰§è¡Œæµ‹è¯•ã€‚ç”³è¯·pull requestï¼Œå®¡æ ¸é€šè¿‡ä¹Ÿå¯ä»¥è§¦å‘å·¥ä½œæµã€‚<br>
æµ‹è¯•é€šè¿‡ï¼Œè¯´æ˜é¡¹ç›®å¯ä»¥æˆåŠŸç¼–è¯‘ã€‚</p>
<h1 id="3-é›†æˆæµ‹è¯•ç»“æœ">3. é›†æˆæµ‹è¯•ç»“æœ</h1>
<p>ç¼–è¯‘æˆåŠŸçš„æµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š<br>
<img src="../blogImg/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%951.PNG" alt="Alt text"></p>
<p>æ­¤æ—¶è‹¥ä¿®æ”¹ä»£ç ä½¿ç¼–è¯‘ä¸é€šè¿‡ï¼Œæµ‹è¯•ç»“æœå¦‚ä¸‹ï¼š<br>
<img src="../blogImg/%E9%9B%86%E6%88%90%E6%B5%8B%E8%AF%952.PNG" alt="Alt text"></p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="http://localhost:1313/" >
    &copy;  Nameless Monster 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
